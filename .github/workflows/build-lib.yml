name: Building lib*dlog.so files

on:
  push:
    branches: 
      - "pollard-rho"
      - "pollard-rho-Fp"
      - "baby"
      - "baby-Fp"
      - "pohlig-hellman"

permissions:
  contents: write

jobs:
  libbuild:
    name: Building .so files
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: git checkout pollard-rho
      - run: apt install libgmp-dev libxxhash-dev
      - run: make libdlogefp
      - run: git checkout pohlig-hellman
      - run: cp so/libdlogefp.so libdlogefp.so
      - run: git add libdlogefp.so
      - run: git commit -m "Automatically compile libdlogefp.so"
      - run: git push